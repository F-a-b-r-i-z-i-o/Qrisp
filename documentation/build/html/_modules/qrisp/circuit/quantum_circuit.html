

<!DOCTYPE html>


<html data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>qrisp.circuit.quantum_circuit &#8212;   documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom03.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = "div.highlight"
const thebe_selector_input = "pre"
const thebe_selector_output = "span.go"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/qrisp/circuit/quantum_circuit';</script>
    <link rel="canonical" href="https://qrisp.eu/_modules/qrisp/circuit/quantum_circuit.html" />
    <link rel="shortcut icon" href="../../../_static/qrisp_favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs... "
         aria-label="Search the docs... "
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
    
    
    
    <img src="../../../_static/qrisp_logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../../_static/qrisp_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../general/tutorial/index.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../reference/index.html">
                        Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../general/setup.html">
                        Setup
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../general/changelog/index.html">
                        Changelog
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../general/imprint.html">
                        Imprint
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-qrisp/Qrisp" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../general/tutorial/index.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../reference/index.html">
                        Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../general/setup.html">
                        Setup
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../general/changelog/index.html">
                        Changelog
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../general/imprint.html">
                        Imprint
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-qrisp/Qrisp" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs... "
         aria-label="Search the docs... "
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Module code</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">qrisp.circui...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <h1>Source code for qrisp.circuit.quantum_circuit</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">\********************************************************************************</span>
<span class="sd">* Copyright (c) 2023 the Qrisp authors</span>
<span class="sd">*</span>
<span class="sd">* This program and the accompanying materials are made available under the</span>
<span class="sd">* terms of the Eclipse Public License 2.0 which is available at</span>
<span class="sd">* http://www.eclipse.org/legal/epl-2.0.</span>
<span class="sd">*</span>
<span class="sd">* This Source Code may also be made available under the following Secondary</span>
<span class="sd">* Licenses when the conditions for such availability set forth in the Eclipse</span>
<span class="sd">* Public License, v. 2.0 are satisfied: GNU General Public License, version 2</span>
<span class="sd">* with the GNU Classpath Exception which is</span>
<span class="sd">* available at https://www.gnu.org/software/classpath/license.html.</span>
<span class="sd">*</span>
<span class="sd">* SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0</span>
<span class="sd">********************************************************************************/</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">sympy</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span>

<span class="kn">import</span> <span class="nn">qrisp.circuit.standard_operations</span> <span class="k">as</span> <span class="nn">ops</span>
<span class="kn">from</span> <span class="nn">qrisp.circuit</span> <span class="kn">import</span> <span class="n">Clbit</span><span class="p">,</span> <span class="n">Instruction</span><span class="p">,</span> <span class="n">Operation</span><span class="p">,</span> <span class="n">Qubit</span><span class="p">,</span> <span class="n">ClControlledOperation</span>

<span class="c1"># Class to describe quantum circuits</span>
<span class="c1"># The naming of the attributes is rather similar to the qiskit equivalent</span>
<span class="c1"># in order to allow compatibility of qiskit programs to qrisp</span>
<span class="c1"># The key attributes are</span>

<span class="c1"># The list of qubits (.qubits).</span>
<span class="c1"># the list of classical bits (.clbits)</span>
<span class="c1"># the list of instructions (.data)</span>


<div class="viewcode-block" id="QuantumCircuit"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/QuantumCircuit.html#qrisp.QuantumCircuit">[docs]</a><span class="k">class</span> <span class="nc">QuantumCircuit</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class describes quantum circuits. Many of the attribute and method names are</span>
<span class="sd">    oriented at the `Qiskit QuantumCircuit</span>
<span class="sd">    &lt;https://qiskit.org/documentation/stubs/qiskit.circuit.QuantumCircuit.html&gt;`_ class</span>
<span class="sd">    in order to provide a high degree of compatibility.</span>

<span class="sd">    QuantumCircuits can be visualized by calling ``print`` on them.</span>

<span class="sd">    Qrisp QuantumCircuits can be quickly generated out of existing Qiskit</span>
<span class="sd">    QuantumCircuits with the :meth:`from_qiskit &lt;qrisp.QuantumCircuit.from_qiskit&gt;`</span>
<span class="sd">    method.</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    num_qubits : integer, optional</span>
<span class="sd">        The amount of qubits, this QuantumCircuit is initialized with. The default is 0.</span>
<span class="sd">    num_clbits : integer, optional</span>
<span class="sd">        The amount of classical bits. The default is 0.</span>
<span class="sd">    name : string, optional</span>
<span class="sd">        A name for the QuantumCircuit. The default will generated a generic name.</span>


<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    We create a QuantumCircuit containing a so-called fan-out gate:</span>

<span class="sd">    &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">    &gt;&gt;&gt; qc_0 = QuantumCircuit(4, name = &quot;fan out&quot;)</span>
<span class="sd">    &gt;&gt;&gt; qc_0.cx(0, range(1,4))</span>
<span class="sd">    &gt;&gt;&gt; print(qc_0)</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    ::</span>
<span class="sd">    </span>
<span class="sd">        qb_0: ──■────■────■──</span>
<span class="sd">              ┌─┴─┐  │    │</span>
<span class="sd">        qb_1: ┤ X ├──┼────┼──</span>
<span class="sd">              └───┘┌─┴─┐  │</span>
<span class="sd">        qb_2: ─────┤ X ├──┼──</span>
<span class="sd">                   └───┘┌─┴─┐</span>
<span class="sd">        qb_3: ──────────┤ X ├</span>
<span class="sd">                        └───┘</span>

<span class="sd">    Note that the :meth:`cx gate appending method &lt;qrisp.QuantumCircuit.cx&gt;` (like all</span>
<span class="sd">    other gate appending methods) can be called with integers, Qubit objects,</span>
<span class="sd">    lists of integers or lists of Qubit objects.</span>

<span class="sd">    We now turn this QuantumCircuit into a gate and append to another QuantumCircuit to</span>
<span class="sd">    generate a GHZ state:</span>

<span class="sd">    &gt;&gt;&gt; qc_1 = QuantumCircuit(4)</span>
<span class="sd">    &gt;&gt;&gt; qc_1.h(0)</span>
<span class="sd">    &gt;&gt;&gt; qc_1.append(qc_0.to_gate(), qc_1.qubits)</span>
<span class="sd">    &gt;&gt;&gt; print(qc_1)</span>
<span class="sd">    </span>
<span class="sd">    ::</span>
<span class="sd">        </span>
<span class="sd">              ┌───┐┌──────────┐</span>
<span class="sd">        qb_4: ┤ H ├┤0         ├</span>
<span class="sd">              └───┘│          │</span>
<span class="sd">        qb_5: ─────┤1         ├</span>
<span class="sd">                   │  fan out │</span>
<span class="sd">        qb_6: ─────┤2         ├</span>
<span class="sd">                   │          │</span>
<span class="sd">        qb_7: ─────┤3         ├</span>
<span class="sd">                   └──────────┘</span>

<span class="sd">    Finally, we add a measurement and evaluate the circuit:</span>

<span class="sd">    &gt;&gt;&gt; qc_1.measure(qc_1.qubits)</span>
<span class="sd">    &gt;&gt;&gt; print(qc_1)</span>
<span class="sd">        </span>
<span class="sd">    ::</span>
<span class="sd">        </span>
<span class="sd">              ┌───┐┌──────────┐┌─┐</span>
<span class="sd">        qb_4: ┤ H ├┤0         ├┤M├─────────</span>
<span class="sd">              └───┘│          │└╥┘┌─┐</span>
<span class="sd">        qb_5: ─────┤1         ├─╫─┤M├──────</span>
<span class="sd">                   │  fan out │ ║ └╥┘┌─┐</span>
<span class="sd">        qb_6: ─────┤2         ├─╫──╫─┤M├───</span>
<span class="sd">                   │          │ ║  ║ └╥┘┌─┐</span>
<span class="sd">        qb_7: ─────┤3         ├─╫──╫──╫─┤M├</span>
<span class="sd">                   └──────────┘ ║  ║  ║ └╥┘</span>
<span class="sd">        cb_0: ══════════════════╩══╬══╬══╬═</span>
<span class="sd">                                   ║  ║  ║</span>
<span class="sd">        cb_1: ═════════════════════╩══╬══╬═</span>
<span class="sd">                                      ║  ║</span>
<span class="sd">        cb_2: ════════════════════════╩══╬═</span>
<span class="sd">                                         ║</span>
<span class="sd">        cb_3: ═══════════════════════════╩═</span>
<span class="sd">        </span>
<span class="sd">    &gt;&gt;&gt; qc_1.run(shots = 1000)</span>
<span class="sd">    {&#39;0000&#39;: 500, &#39;1111&#39;: 500}</span>

<span class="sd">    **Converting from Qiskit**</span>

<span class="sd">    We construct the very same fan out QuantumCircuit in Qiskit:</span>

<span class="sd">    &gt;&gt;&gt; from qiskit import QuantumCircuit as QiskitQuantumCircuit</span>
<span class="sd">    &gt;&gt;&gt; qc_2 = QiskitQuantumCircuit(4)</span>
<span class="sd">    &gt;&gt;&gt; qc_2.cx(0, range(1,4))</span>
<span class="sd">    &gt;&gt;&gt; print(qc_2)</span>
<span class="sd">    </span>
<span class="sd">    ::</span>
<span class="sd">        </span>
<span class="sd">        q_0: ──■────■────■──</span>
<span class="sd">             ┌─┴─┐  │    │</span>
<span class="sd">        q_1: ┤ X ├──┼────┼──</span>
<span class="sd">             └───┘┌─┴─┐  │</span>
<span class="sd">        q_2: ─────┤ X ├──┼──</span>
<span class="sd">                  └───┘┌─┴─┐</span>
<span class="sd">        q_3: ──────────┤ X ├</span>
<span class="sd">                       └───┘</span>

<span class="sd">    To acquire the Qrisp QuantumCircuit we call the</span>
<span class="sd">    :meth:`from_qiskit &lt;qrisp.QuantumCircuit.from_qiskit&gt;` method. Note that we don&#39;t</span>
<span class="sd">    need to create a QuantumCircuit object first as this is a class method.</span>

<span class="sd">    &gt;&gt;&gt; qrisp_qc_2 = QuantumCircuit.from_qiskit(qc_2)</span>
<span class="sd">    &gt;&gt;&gt; print(qrisp_qc_2)</span>
<span class="sd">    </span>
<span class="sd">    ::</span>
<span class="sd">        </span>
<span class="sd">         qb_8: ──■────■────■──</span>
<span class="sd">               ┌─┴─┐  │    │</span>
<span class="sd">         qb_9: ┤ X ├──┼────┼──</span>
<span class="sd">               └───┘┌─┴─┐  │</span>
<span class="sd">        qb_10: ─────┤ X ├──┼──</span>
<span class="sd">                    └───┘┌─┴─┐</span>
<span class="sd">        qb_11: ──────────┤ X ├</span>
<span class="sd">                         └───┘</span>

<span class="sd">    **Abstract Parameters**</span>

<span class="sd">    Abstract parameters are represented by `Sympy symbols</span>
<span class="sd">    &lt;https://docs.sympy.org/latest/modules/core.html#module-sympy.core.symbol&gt;`_</span>
<span class="sd">    in Qrisp.</span>

<span class="sd">    We create a QuantumCircuit with some abstract parameters and bind them subsequently.</span>

<span class="sd">    &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">    &gt;&gt;&gt; from sympy import symbols</span>
<span class="sd">    &gt;&gt;&gt; qc = QuantumCircuit(3)</span>

<span class="sd">    Create some Sympy symbols and use them as abstract parameters for phase gates:</span>

<span class="sd">    &gt;&gt;&gt; abstract_parameters = symbols(&quot;a b c&quot;)</span>
<span class="sd">    &gt;&gt;&gt; for i in range(3): qc.p(abstract_parameters[i], i)</span>

<span class="sd">    Create the substitution dictionary and bind the parameters:</span>

<span class="sd">    &gt;&gt;&gt; subs_dic = {abstract_parameters[i] : i for i in range(3)}</span>
<span class="sd">    &gt;&gt;&gt; bound_qc = qc.bind_parameters(subs_dic)</span>
<span class="sd">    &gt;&gt;&gt; print(bound_qc)</span>
<span class="sd">    </span>
<span class="sd">    ::</span>
<span class="sd">        </span>
<span class="sd">              ┌──────┐</span>
<span class="sd">        qb_0: ┤ P(0) ├</span>
<span class="sd">              ├──────┤</span>
<span class="sd">        qb_1: ┤ P(1) ├</span>
<span class="sd">              ├──────┤</span>
<span class="sd">        qb_2: ┤ P(2) ├</span>
<span class="sd">              └──────┘</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">qubit_index_counter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">fast_append</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_qubits</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_clbits</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;qubits&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;clbits&quot;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">abstract_params</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([])</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;circuit_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">qubit_index_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Qubit</span><span class="p">(</span><span class="s2">&quot;qb_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubit_index_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Tried to initialize QuantumCircuit with type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_clbits</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_clbits</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_clbit</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Tried to initialize QuantumCircuit with type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">num_clbits</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">last_qubit_count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="c1"># Method to add qubit objects to the circuit</span>
<div class="viewcode-block" id="QuantumCircuit.add_qubit"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.add_qubit.html#qrisp.QuantumCircuit.add_qubit">[docs]</a>    <span class="k">def</span> <span class="nf">add_qubit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a Qubit to the QuantumCircuit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubit : Qubit, optional</span>
<span class="sd">            The Qubit to be added. If given none, a new Qubit will be generated.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Qubit</span>
<span class="sd">            The added Qubit.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit()</span>
<span class="sd">        &gt;&gt;&gt; qc.add_qubit()</span>
<span class="sd">        &gt;&gt;&gt; qc.qubits</span>
<span class="sd">        [qb_0]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">qubit_index_counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">qubit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">qubit</span> <span class="o">=</span> <span class="n">Qubit</span><span class="p">(</span><span class="s2">&quot;qb_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubit_index_counter</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qubit</span><span class="p">,</span> <span class="n">Qubit</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tried to add type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">qubit</span><span class="p">)</span><span class="si">}</span><span class="s2"> as a qubit&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">qb</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">qubit</span><span class="o">.</span><span class="n">identifier</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Qubit name </span><span class="si">{</span><span class="n">qubit</span><span class="o">.</span><span class="n">identifier</span><span class="si">}</span><span class="s2"> already exists&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qubit</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>

    <span class="c1"># Method to add classical bit objects to the circuit</span>
<div class="viewcode-block" id="QuantumCircuit.add_clbit"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.add_clbit.html#qrisp.QuantumCircuit.add_clbit">[docs]</a>    <span class="k">def</span> <span class="nf">add_clbit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clbit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a classical bit to the QuantumCircuit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clbit : Clbit, optional</span>
<span class="sd">            The classical bit to be added. If given none, a new Clbit will be generated.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Clbit</span>
<span class="sd">            The added Clbit.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">clbit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">clbit</span> <span class="o">=</span> <span class="n">Clbit</span><span class="p">(</span><span class="s2">&quot;cb_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="p">)))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">clbit</span><span class="p">,</span> <span class="n">Clbit</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tried to add type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">clbit</span><span class="p">)</span><span class="si">}</span><span class="s2"> as a classical bit&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cb</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">clbit</span><span class="o">.</span><span class="n">identifier</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Clbit name </span><span class="si">{</span><span class="n">clbit</span><span class="o">.</span><span class="n">identifier</span><span class="si">}</span><span class="s2"> already exists&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clbit</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>

    <span class="c1"># Method to transform the given circuit into an operation object</span>
<div class="viewcode-block" id="QuantumCircuit.to_op"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.to_op.html#qrisp.QuantumCircuit.to_op">[docs]</a>    <span class="k">def</span> <span class="nf">to_op</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to return an Operation object generated out of this QuantumCircuit.</span>

<span class="sd">        Operation objects can be appended to other QuantumCircuits.</span>

<span class="sd">        An alias for Qiskit compatibility is the</span>
<span class="sd">        :meth:`to_gate&lt;qrisp.QuantumCircuit.to_gate&gt;` method.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : string, optional</span>
<span class="sd">            The name of the gate. By default, the QuantumCircuit&#39;s name will be used.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Operation</span>
<span class="sd">            The Operation defined by this QuantumCircuit.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc_0 = QuantumCircuit(4)</span>
<span class="sd">        &gt;&gt;&gt; qc_0.x(qc.qubits)</span>
<span class="sd">        &gt;&gt;&gt; operation = qc_0.to_gate()</span>
<span class="sd">        &gt;&gt;&gt; qc_1 = QuantumCircuit(4)</span>
<span class="sd">        &gt;&gt;&gt; qc_1.append(operation, qc_1.qubits)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

        <span class="n">definition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">definition</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">definition</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;qb_alloc&quot;</span><span class="p">,</span> <span class="s2">&quot;qb_dealloc&quot;</span><span class="p">]:</span>
                <span class="n">definition</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">Operation</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">num_qubits</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">),</span>
            <span class="n">num_clbits</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="p">),</span>
            <span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="p">[],</span>
        <span class="p">)</span></div>

    <span class="c1"># Wrapper to increase Qiskit compatibility</span>
<div class="viewcode-block" id="QuantumCircuit.to_gate"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.to_gate.html#qrisp.QuantumCircuit.to_gate">[docs]</a>    <span class="k">def</span> <span class="nf">to_gate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Similar to :meth:`to_op &lt;qrisp.QuantumCircuit.to_op&gt;` but raises an exception</span>
<span class="sd">        if self contains classical bits (like the</span>
<span class="sd">        `Qiskit equivalent</span>
<span class="sd">        &lt;https://qiskit.org/documentation/stubs/qiskit.circuit.QuantumCircuit.to_gate.html&gt;`_).</span>
<span class="sd">        # noqa</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str, optional</span>
<span class="sd">            A name for the resulting gate. The default is None.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        Exception</span>
<span class="sd">            Tried to turn a circuit including classical bits into unitary gate</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Operation</span>
<span class="sd">            The QuantumCircuit turned into an :ref:`Operation` instance.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Tried to turn a circuit including classical bits into unitary gate&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_op</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

    <span class="c1"># Method to extend the given circuit with another circuit</span>
    <span class="c1"># The dic translation dic encodes how the qubits should be plugged into each other</span>
<div class="viewcode-block" id="QuantumCircuit.extend"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.extend.html#qrisp.QuantumCircuit.extend">[docs]</a>    <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">translation_dic</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extends self in-place by another QuantumCircuit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : QuantumCircuit</span>
<span class="sd">            The QuantumCircuit to extend by.</span>
<span class="sd">        translation_dic : dict, optional</span>
<span class="sd">            The dictionary containing the information about which Qubits and Clbits</span>
<span class="sd">            should be plugged into each other. This dictionary should contain qubits of</span>
<span class="sd">            other as keys and qubits of self as values. If given none, it is assumed</span>
<span class="sd">            that both QuantumCircuits have matching Qubits.</span>


<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We create two QuantumCircuits and extend the first with reversed qubit order by</span>
<span class="sd">        the other:</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; extension_qc = QuantumCircuit(4)</span>
<span class="sd">        &gt;&gt;&gt; qc_to_extend = QuantumCircuit(4)</span>
<span class="sd">        &gt;&gt;&gt; extension_qc.cx(0, 1)</span>
<span class="sd">        &gt;&gt;&gt; extension_qc.cy(0, 2)</span>
<span class="sd">        &gt;&gt;&gt; extension_qc.cz(0, 3)</span>
<span class="sd">        &gt;&gt;&gt; print(extension_qc)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">            </span>
<span class="sd">            qb_0: ──■────■────■──</span>
<span class="sd">                  ┌─┴─┐  │    │</span>
<span class="sd">            qb_1: ┤ X ├──┼────┼──</span>
<span class="sd">                  └───┘┌─┴─┐  │</span>
<span class="sd">            qb_2: ─────┤ Y ├──┼──</span>
<span class="sd">                       └───┘┌─┴─┐</span>
<span class="sd">            qb_3: ──────────┤ Z ├</span>
<span class="sd">                            └───┘</span>
<span class="sd">        &gt;&gt;&gt; translation_dic = {extension_qc.qubits[i] : qc_to_extend.qubits[-1-i]</span>
<span class="sd">        &gt;&gt;&gt; for i in range(4)}</span>
<span class="sd">        &gt;&gt;&gt; qc_to_extend.extend(extension_qc, translation_dic)</span>
<span class="sd">        &gt;&gt;&gt; print(qc_to_extend)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">            </span>
<span class="sd">                            ┌───┐</span>
<span class="sd">            qb_4: ──────────┤ Z ├</span>
<span class="sd">                       ┌───┐└─┬─┘</span>
<span class="sd">            qb_5: ─────┤ Y ├──┼──</span>
<span class="sd">                  ┌───┐└─┬─┘  │</span>
<span class="sd">            qb_6: ┤ X ├──┼────┼──</span>
<span class="sd">                  └─┬─┘  │    │</span>
<span class="sd">            qb_7: ──■────■────■──</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">translation_dic</span> <span class="o">==</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span>
            <span class="n">translation_dic</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">qubits</span><span class="p">:</span>
                <span class="n">translation_dic</span><span class="p">[</span><span class="n">qb</span><span class="p">]</span> <span class="o">=</span> <span class="n">qb</span>

            <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">clbits</span><span class="p">:</span>
                <span class="n">translation_dic</span><span class="p">[</span><span class="n">cb</span><span class="p">]</span> <span class="o">=</span> <span class="n">cb</span>

        <span class="c1"># Copy in order to prevent modification</span>
        <span class="n">translation_dic</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">translation_dic</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">translation_dic</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="n">Qubit</span><span class="p">,</span> <span class="n">Clbit</span><span class="p">)):</span>
                <span class="n">translation_dic</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">translation_dic</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>
            <span class="n">instruction_other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">qubits</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="n">instruction_other</span><span class="o">.</span><span class="n">qubits</span><span class="p">:</span>
                <span class="n">qubits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">translation_dic</span><span class="p">[</span><span class="n">qb</span><span class="o">.</span><span class="n">identifier</span><span class="p">])</span>

            <span class="n">clbits</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="n">instruction_other</span><span class="o">.</span><span class="n">clbits</span><span class="p">:</span>
                <span class="n">clbits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">translation_dic</span><span class="p">[</span><span class="n">cb</span><span class="o">.</span><span class="n">identifier</span><span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instruction_other</span><span class="o">.</span><span class="n">op</span><span class="p">,</span> <span class="n">qubits</span><span class="p">,</span> <span class="n">clbits</span><span class="p">)</span></div>

    <span class="c1"># Returns a copy of self</span>
<div class="viewcode-block" id="QuantumCircuit.copy"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.copy.html#qrisp.QuantumCircuit.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a copy of the given QuantumCircuit.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        QuantumCircuit</span>
<span class="sd">            The copied QuantumCircuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If an inital circuit is given we construct a new instance</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">()</span>

        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="s2">&quot;qubits&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">))</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="s2">&quot;clbits&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">abstract_params</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abstract_params</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">return</span> <span class="n">res</span>

        <span class="k">return</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">init_qc</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="c1"># Returns a copy of self but with no instructions</span>
<div class="viewcode-block" id="QuantumCircuit.clearcopy"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.clearcopy.html#qrisp.QuantumCircuit.clearcopy">[docs]</a>    <span class="k">def</span> <span class="nf">clearcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a copy of the given QuantumCircuit but without any data</span>
<span class="sd">        (i.e. just the Qubits and Clbits).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        QuantumCircuit</span>
<span class="sd">            The empty, copied QuantumCircuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">temp_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">temp_data</span>
        <span class="k">return</span> <span class="n">res</span></div>

    <span class="c1"># TO-DO write qiskit independent printer</span>

    <span class="c1"># Printing method</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="kn">from</span> <span class="nn">qiskit.visualization.circuit_visualization</span> <span class="kn">import</span> <span class="n">circuit_drawer</span>

        <span class="kn">from</span> <span class="nn">qrisp.interface.circuit_converter</span> <span class="kn">import</span> <span class="n">convert_circuit</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">res_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
                <span class="n">circuit_drawer</span><span class="p">(</span>
                    <span class="n">convert_circuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_api</span><span class="o">=</span><span class="s2">&quot;qiskit&quot;</span><span class="p">,</span> <span class="n">transpile</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
                    <span class="n">output</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
                    <span class="n">cregbundle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Tried to print QuantumSession with uncompiled QuantumEnvironments&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">res_str</span>

    <span class="c1"># Method which compares the unitary of two given circuits and returns</span>
    <span class="c1"># True if they are equivalent</span>
<div class="viewcode-block" id="QuantumCircuit.compare_unitary"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.compare_unitary.html#qrisp.QuantumCircuit.compare_unitary">[docs]</a>    <span class="k">def</span> <span class="nf">compare_unitary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ignore_gphase</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compares the unitaries of two QuantumCircuits. This can be used to check if a</span>
<span class="sd">        QuantumCircuit transformation is valid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : QuantumCircuit</span>
<span class="sd">            The QuantumCircuit to compare to.</span>
<span class="sd">        precision : int, optional</span>
<span class="sd">            The precision of the comparison. This function will return True, if the norm</span>
<span class="sd">            of the difference of the unitaries is below the precision. The default is 4.</span>
<span class="sd">        ignore_gphase: bool, optional</span>
<span class="sd">            If set to True, this method returns True if the unitaries only differ in a</span>
<span class="sd">            global phase.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Bool</span>
<span class="sd">            The comparison outcome.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We create two QuantumCircuit with equivalent unitaries but differing by a</span>
<span class="sd">        non-trivial commutation:</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc_0 = QuantumCircuit(2)</span>
<span class="sd">        &gt;&gt;&gt; qc_1 = QuantumCircuit(2)</span>
<span class="sd">        &gt;&gt;&gt; qc_0.z(0)</span>
<span class="sd">        &gt;&gt;&gt; qc_0.cx(0,1)</span>
<span class="sd">        &gt;&gt;&gt; print(qc_0)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">            </span>
<span class="sd">                  ┌───┐</span>
<span class="sd">            qb_0: ┤ Z ├──■──</span>
<span class="sd">                  └───┘┌─┴─┐</span>
<span class="sd">            qb_1: ─────┤ X ├</span>
<span class="sd">                       └───┘</span>
<span class="sd">        &gt;&gt;&gt; qc_1.cx(0,1)</span>
<span class="sd">        &gt;&gt;&gt; qc_1.z(0)</span>
<span class="sd">        &gt;&gt;&gt; print(qc_1)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">                </span>
<span class="sd">                       ┌───┐</span>
<span class="sd">            qb_2: ──■──┤ Z ├</span>
<span class="sd">                  ┌─┴─┐└───┘</span>
<span class="sd">            qb_3: ┤ X ├─────</span>
<span class="sd">                  └───┘</span>
<span class="sd">                  </span>
<span class="sd">        &gt;&gt;&gt; qc_0.compare_unitary(qc_1)</span>
<span class="sd">        True</span>


<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">qubits</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">unitary_self</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unitary</span><span class="p">()</span>
        <span class="n">unitary_other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_unitary</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">ignore_gphase</span><span class="p">:</span>
            <span class="n">arg_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">unitary_self</span><span class="o">.</span><span class="n">flatten</span><span class="p">()))</span>

            <span class="n">unitary_self</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">unitary_self</span>
                <span class="o">*</span> <span class="n">unitary_other</span><span class="o">.</span><span class="n">flatten</span><span class="p">()[</span><span class="n">arg_max</span><span class="p">]</span>
                <span class="o">/</span> <span class="n">unitary_self</span><span class="o">.</span><span class="n">flatten</span><span class="p">()[</span><span class="n">arg_max</span><span class="p">]</span>
            <span class="p">)</span>

        <span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">norm</span>

        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">unitary_self</span> <span class="o">-</span> <span class="n">unitary_other</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**-</span><span class="n">precision</span><span class="p">)</span></div>

    <span class="c1"># Converts several types of inputs to qubit lists.</span>
    <span class="c1"># Possible inputs are</span>
    <span class="c1">#</span>
    <span class="c1"># A qubit object</span>
    <span class="c1"># An integer</span>
    <span class="c1"># A list of integers</span>
    <span class="c1"># A list of qubits</span>
    <span class="k">def</span> <span class="nf">convert_to_qubit_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">inner_recursion</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">Qubit</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">inner_recursion</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">input</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="nb">input</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_qubit_list</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">[</span><span class="nb">input</span><span class="p">],</span> <span class="n">inner_recursion</span><span class="o">=</span><span class="n">inner_recursion</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;Not enough qubits in circuit to access qubit &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">return_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">:</span>
                <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_to_qubit_list</span><span class="p">(</span><span class="n">qb</span><span class="p">,</span> <span class="n">inner_recursion</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">return_list</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Could not convert input type &quot;</span> <span class="o">+</span> <span class="nb">type</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; to qubit list&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Similar function as above but with classical bits</span>
    <span class="k">def</span> <span class="nf">convert_to_clbit_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">inner_recursion</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">Clbit</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">inner_recursion</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">input</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="nb">input</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_clbit_list</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="p">[</span><span class="nb">input</span><span class="p">],</span> <span class="n">inner_recursion</span><span class="o">=</span><span class="n">inner_recursion</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;Not enough clbits in circuit to access clbit &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">return_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">:</span>
                <span class="n">return_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_to_clbit_list</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="n">inner_recursion</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">return_list</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_clbit_list</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">input</span><span class="p">))</span>

    <span class="c1"># Generates the inverse of self by applying the inverse gates in reversed order</span>
<div class="viewcode-block" id="QuantumCircuit.inverse"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.inverse.html#qrisp.QuantumCircuit.inverse">[docs]</a>    <span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the inverse/daggered QuantumCircuit.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        inverted_circuit : QuantumCircuit</span>
<span class="sd">            The inverted QuantumCircuit.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        Daggering a QuantumCircuit reverses the order and daggers each operation.</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(1)</span>
<span class="sd">        &gt;&gt;&gt; qc.x(0)</span>
<span class="sd">        &gt;&gt;&gt; qc.p(np.pi/2, 0)</span>
<span class="sd">        &gt;&gt;&gt; qc.y(0)</span>
<span class="sd">        &gt;&gt;&gt; print(qc.inverse())</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">              </span>
<span class="sd">                  ┌───┐┌─────────┐┌───┐</span>
<span class="sd">            qb_0: ┤ Y ├┤ P(-π/2) ├┤ X ├</span>
<span class="sd">                  └───┘└─────────┘└───┘</span>

<span class="sd">        For the phase gate, a daggering implies the reversal of the phase -</span>
<span class="sd">        Pauli gates however are invariant under daggering.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">inverted_circuit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearcopy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">inverted_circuit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">inverse</span><span class="p">(),</span> <span class="n">instr</span><span class="o">.</span><span class="n">qubits</span><span class="p">,</span> <span class="n">instr</span><span class="o">.</span><span class="n">clbits</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">inverted_circuit</span></div>

    <span class="c1"># Generate the circuits unitary matrix</span>
<div class="viewcode-block" id="QuantumCircuit.get_unitary"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.get_unitary.html#qrisp.QuantumCircuit.get_unitary">[docs]</a>    <span class="k">def</span> <span class="nf">get_unitary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Acquires the unitary matrix of the given QuantumCircuit as a Numpy array.</span>

<span class="sd">        This method also works with abstract parameters. In this case a Numpy array</span>
<span class="sd">        with Sympy entries is returned.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        decimals : integer, optional</span>
<span class="sd">            The amount of decimals to be rounded to. By default, the full precision is</span>
<span class="sd">            returned.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The unitary matrix as a numpy array.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We synthesize a controlled phase gate and inspect the unitary:</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(2)</span>
<span class="sd">        &gt;&gt;&gt; phi = np.pi</span>
<span class="sd">        &gt;&gt;&gt; qc.p(phi/2, 0)</span>
<span class="sd">        &gt;&gt;&gt; qc.p(phi/2, 1)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(0,1)</span>
<span class="sd">        &gt;&gt;&gt; qc.p(-phi/2, 1)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(0,1)</span>
<span class="sd">        &gt;&gt;&gt; qc.get_unitary(decimals = 4)</span>
<span class="sd">        array([[ 1.+0.j,  0.+0.j,  0.+0.j,  0.+0.j],</span>
<span class="sd">               [ 0.+0.j,  1.+0.j,  0.+0.j,  0.+0.j],</span>
<span class="sd">               [ 0.+0.j,  0.+0.j,  1.+0.j,  0.+0.j],</span>
<span class="sd">               [ 0.+0.j,  0.+0.j,  0.+0.j, -1.+0.j]], dtype=complex64)</span>

<span class="sd">        We now synthesize the exact same QuantumCircuit but this time ``phi`` is a Sympy</span>
<span class="sd">        symbol.</span>

<span class="sd">        &gt;&gt;&gt; from sympy import Symbol</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(2)</span>
<span class="sd">        &gt;&gt;&gt; phi = Symbol(&quot;phi&quot;)</span>
<span class="sd">        &gt;&gt;&gt; qc.p(phi/2, 0)</span>
<span class="sd">        &gt;&gt;&gt; qc.p(phi/2, 1)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(0,1)</span>
<span class="sd">        &gt;&gt;&gt; qc.p(-phi/2, 1)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(0,1)</span>
<span class="sd">        &gt;&gt;&gt; qc.get_unitary(decimals = 4)</span>
<span class="sd">        array([[1, 0, 0, 0],</span>
<span class="sd">               [0, 1, 0, 0],</span>
<span class="sd">               [0, 0, 1, 0],</span>
<span class="sd">               [0, 0, 0, exp(I*phi)]], dtype=object)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qrisp.simulator</span> <span class="kn">import</span> <span class="n">calc_circuit_unitary</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">calc_circuit_unitary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">decimals</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">):</span>
                <span class="n">raveled_res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">raveled_res</span><span class="p">)):</span>
                    <span class="n">expression</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">raveled_res</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">sympy</span><span class="o">.</span><span class="n">preorder_traversal</span><span class="p">(</span><span class="n">expression</span><span class="p">):</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">sympy</span><span class="o">.</span><span class="n">Float</span><span class="p">):</span>
                            <span class="n">rounded_float</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">decimals</span><span class="p">)</span>
                            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**-</span><span class="p">(</span><span class="n">decimals</span><span class="p">):</span>
                                <span class="n">expression</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">expression</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">rounded_float</span><span class="p">)</span>

                    <span class="n">raveled_res</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">expression</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">decimals</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span></div>

    <span class="k">def</span> <span class="nf">get_depth_dic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">qrisp.misc</span> <span class="kn">import</span> <span class="n">get_depth_dic</span>

        <span class="k">return</span> <span class="n">get_depth_dic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cnot_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to determine the amount of CNOT gates used in this QuantumCircuit.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The amount of CNOT gates.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">qrisp.misc</span> <span class="kn">import</span> <span class="n">cnot_count</span>

        <span class="k">return</span> <span class="n">cnot_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="QuantumCircuit.transpile"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.transpile.html#qrisp.QuantumCircuit.transpile">[docs]</a>    <span class="k">def</span> <span class="nf">transpile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transpilation_level</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="o">**</span><span class="n">qiskit_kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transpiles the QuantumCircuit in the sense that there are no longer any</span>
<span class="sd">        synthesized gate objects. Furthermore, we can call the `Qiskit transpiler</span>
<span class="sd">        &lt;https://qiskit.org/documentation/stubs/qiskit.compiler.transpile.html&gt;`__</span>
<span class="sd">        by supplying keyword arguments.</span>

<span class="sd">        The Qiskit transpiler is not called, if no keyword arguments are given.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        **qiskit_kwargs :</span>
<span class="sd">            Keyword arguments for the Qiskit transpiler.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        QuantumCircuit</span>
<span class="sd">            The transpiled QuantumCircuit.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We create a QuantumCircuit and append a synthesized gate. Afterwards we</span>
<span class="sd">        transpile to a given set of basis gates using the Qiskit transpiler:</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(3)</span>
<span class="sd">        &gt;&gt;&gt; qc.mcx([0,1], 2)</span>
<span class="sd">        &gt;&gt;&gt; print(qc)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">            </span>
<span class="sd">            qb_0: ──■──</span>
<span class="sd">                    │</span>
<span class="sd">            qb_1: ──■──</span>
<span class="sd">                  ┌─┴─┐</span>
<span class="sd">            qb_2: ┤ X ├</span>
<span class="sd">                  └───┘</span>
<span class="sd">        &gt;&gt;&gt; print(qc.transpile(basis_gates = [&quot;cx&quot;, &quot;rz&quot;, &quot;sx&quot;]))</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">            </span>
<span class="sd">            global phase: 9π/8</span>
<span class="sd">                  ┌──────────┐                 ┌───┐┌─────────┐   ┌───┐   ┌──────────┐┌───┐»</span>
<span class="sd">            qb_1: ┤ Rz(-π/4) ├─────────────────┤ X ├┤ Rz(π/4) ├───┤ X ├───┤ Rz(-π/4) ├┤ X ├»</span>
<span class="sd">                  ├──────────┤                 └─┬─┘└─────────┘   └─┬─┘   └──────────┘└─┬─┘»</span>
<span class="sd">            qb_2: ┤ Rz(-π/4) ├───────────────────┼───────■──────────■──────────■────────┼──»</span>
<span class="sd">                  ├─────────┬┘┌────┐┌─────────┐  │     ┌─┴─┐   ┌─────────┐   ┌─┴─┐      │  »</span>
<span class="sd">            qb_3: ┤ Rz(π/2) ├─┤ √X ├┤ Rz(π/2) ├──■─────┤ X ├───┤ Rz(π/4) ├───┤ X ├──────■──»</span>
<span class="sd">                  └─────────┘ └────┘└─────────┘        └───┘   └─────────┘   └───┘         »</span>
<span class="sd">            «      ┌─────────┐┌───┐</span>
<span class="sd">            «qb_1: ┤ Rz(π/4) ├┤ X ├────────────</span>
<span class="sd">            «      └─────────┘└─┬─┘</span>
<span class="sd">            «qb_2: ─────────────■──────────────</span>
<span class="sd">            «      ┌─────────┐┌────┐┌─────────┐</span>
<span class="sd">            «qb_3: ┤ Rz(π/4) ├┤ √X ├┤ Rz(π/2) ├</span>
<span class="sd">            «      └─────────┘└────┘└─────────┘</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qrisp.circuit</span> <span class="kn">import</span> <span class="n">transpile</span>

        <span class="k">return</span> <span class="n">transpile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transpilation_level</span><span class="p">,</span> <span class="o">**</span><span class="n">qiskit_kwargs</span><span class="p">)</span></div>

    <span class="c1"># Counts the amount of operations self contains and returns</span>
    <span class="c1"># a dict {&quot;operatio_name&quot; : operation_count, ...}</span>
<div class="viewcode-block" id="QuantumCircuit.count_ops"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.count_ops.html#qrisp.QuantumCircuit.count_ops">[docs]</a>    <span class="k">def</span> <span class="nf">count_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Counts the amount of operations of each kind. Note that operations are</span>
<span class="sd">        identified by their name.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        count_dic : dict</span>
<span class="sd">            A dictionary containing the gate counts.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We create a QuantumCircuit containing a number of gates and evaluates the</span>
<span class="sd">        gate-counts:</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(5)</span>
<span class="sd">        &gt;&gt;&gt; qc.x(qc.qubits)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(0, range(1,5))</span>
<span class="sd">        &gt;&gt;&gt; qc.z(1)</span>
<span class="sd">        &gt;&gt;&gt; qc.t(range(5))</span>
<span class="sd">        &gt;&gt;&gt; qc.count_ops()</span>
<span class="sd">        {&#39;x&#39;: 5, &#39;cx&#39;: 4, &#39;z&#39;: 1, &#39;t&#39;: 5}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">count_dic</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">ins</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ins</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;qb_alloc&quot;</span><span class="p">,</span> <span class="s2">&quot;qb_dealloc&quot;</span><span class="p">]:</span>
                <span class="k">continue</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">count_dic</span><span class="p">[</span><span class="n">ins</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">count_dic</span><span class="p">[</span><span class="n">ins</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">count_dic</span></div>

    <span class="k">def</span> <span class="nf">control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_gate</span><span class="p">()</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">qubits</span><span class="o">=</span><span class="p">[],</span> <span class="n">clbits</span><span class="o">=</span><span class="p">[],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">to_gate</span><span class="p">(),</span> <span class="n">qubits</span><span class="p">,</span> <span class="n">clbits</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">to_gate</span><span class="p">(),</span> <span class="n">qubits</span><span class="p">,</span> <span class="n">clbits</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>

<div class="viewcode-block" id="QuantumCircuit.bind_parameters"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.bind_parameters.html#qrisp.QuantumCircuit.bind_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">bind_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subs_dic</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a QuantumCircuit where the abstract parameters in ``subs_dic`` are bound</span>
<span class="sd">        to their specified values.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        subs_dic : dict</span>
<span class="sd">            A dictionary containing the abstract parameters of this QuantumCircuit as</span>
<span class="sd">            keys and the desired parameters as values.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        Exception</span>
<span class="sd">            ``subs_dic`` did not specify a value for all abstract parameters.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        QuantumCircuit</span>
<span class="sd">            The QuantumCircuit with substituted parameters.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We create a QuantumCircuit with some abstract parameters and bind them</span>
<span class="sd">        subsequently:</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; from sympy import symbols</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(3)</span>

<span class="sd">        Create some sympy symbols and use them as abstract parameters for phase gates:</span>

<span class="sd">        &gt;&gt;&gt; abstract_parameters = symbols(&quot;a b c&quot;)</span>
<span class="sd">        &gt;&gt;&gt; for i in range(3): qc.p(abstract_parameters[i], i)</span>

<span class="sd">        Create the substitution dictionary and bind the parameters:</span>

<span class="sd">        &gt;&gt;&gt; subs_dic = {abstract_parameters[i] : i for i in range(3)}</span>
<span class="sd">        &gt;&gt;&gt; bound_qc = qc.bind_parameters(subs_dic)</span>
<span class="sd">        &gt;&gt;&gt; print(bound_qc)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">                </span>
<span class="sd">                  ┌──────┐</span>
<span class="sd">            qb_0: ┤ P(0) ├</span>
<span class="sd">                  ├──────┤</span>
<span class="sd">            qb_1: ┤ P(1) ├</span>
<span class="sd">                  ├──────┤</span>
<span class="sd">            qb_2: ┤ P(2) ├</span>
<span class="sd">                  └──────┘</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">subs_circ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearcopy</span><span class="p">()</span>

        <span class="n">missing_parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_params</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">subs_dic</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">missing_parameters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Need parameter specification for abstract parameters &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">missing_parameters</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">ins</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="n">subs_circ</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">Instruction</span><span class="p">(</span><span class="n">ins</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">bind_parameters</span><span class="p">(</span><span class="n">subs_dic</span><span class="p">),</span> <span class="n">ins</span><span class="o">.</span><span class="n">qubits</span><span class="p">,</span> <span class="n">ins</span><span class="o">.</span><span class="n">clbits</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="n">subs_circ</span><span class="o">.</span><span class="n">abstract_params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">subs_circ</span></div>

<div class="viewcode-block" id="QuantumCircuit.to_latex"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.to_latex.html#qrisp.QuantumCircuit.to_latex">[docs]</a>    <span class="k">def</span> <span class="nf">to_latex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deploys the Qiskit circuit drawer to generate LaTeX output.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        **kwargs : dict</span>
<span class="sd">            Dictionary of keyword args for Qiskits `circuit_drawer</span>
<span class="sd">            &lt;https://qiskit.org/documentation/stable/0.19/stubs/qiskit.visualization.circuit_drawer.html&gt;`_</span>
<span class="sd">            function.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        string</span>
<span class="sd">            A string containing the latex code.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qrisp.interface</span> <span class="kn">import</span> <span class="n">convert_circuit</span>

        <span class="n">qiskit_qc</span> <span class="o">=</span> <span class="n">convert_circuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;qiskit&quot;</span><span class="p">,</span> <span class="n">transpile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">qiskit.visualization</span> <span class="kn">import</span> <span class="n">circuit_drawer</span>

        <span class="k">return</span> <span class="n">circuit_drawer</span><span class="p">(</span><span class="n">qiskit_qc</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">&quot;latex_source&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuantumCircuit.qasm"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.qasm.html#qrisp.QuantumCircuit.qasm">[docs]</a>    <span class="k">def</span> <span class="nf">qasm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the `OpenQASM &lt;https://en.wikipedia.org/wiki/OpenQASM&gt;`_ string of self.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        formatted : bool, optional</span>
<span class="sd">            Return formatted Qasm string. The default is False.</span>
<span class="sd">        filename : string, optional</span>
<span class="sd">            Save Qasm to file with name ‘filename’. The default is None.</span>
<span class="sd">        encoding : TYPE, optional</span>
<span class="sd">            Optionally specify the encoding to use for the output file if filename is</span>
<span class="sd">            specified. By default, this is set to the system’s default encoding</span>
<span class="sd">            (i.e. whatever locale.getpreferredencoding() returns) and can be set to any</span>
<span class="sd">            valid codec or alias from stdlib’s codec module.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        string</span>
<span class="sd">            The OPENQASM string.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_qiskit</span><span class="p">()</span><span class="o">.</span><span class="n">qasm</span><span class="p">(</span><span class="n">formatted</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuantumCircuit.depth"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.depth.html#qrisp.QuantumCircuit.depth">[docs]</a>    <span class="k">def</span> <span class="nf">depth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">depth_indicator</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">transpile</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the depth of the QuantumCircuit. Note that the depth on QuantumCircuit</span>
<span class="sd">        which are not transpiled, might have very little correlation with the runtime.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        depth_indicator : function, optional</span>
<span class="sd">            A function which receives an :ref:`Operation` instance and returns the</span>
<span class="sd">            time/logical depth this operation takes. By default every Operation takes</span>
<span class="sd">            logical depth 1.</span>
<span class="sd">        transpile : bool, optional</span>
<span class="sd">            Boolean to indicate wether the QuantumCircuit should be transpiled before</span>
<span class="sd">            the depth is calculated. The default is True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        integer</span>
<span class="sd">            The depth of the QuantumCircuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">qrisp.misc</span> <span class="kn">import</span> <span class="n">get_depth_dic</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="n">depth_dic</span> <span class="o">=</span> <span class="n">get_depth_dic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transpile_qc</span><span class="o">=</span><span class="n">transpile</span><span class="p">,</span> <span class="n">depth_indicator</span> <span class="o">=</span> <span class="n">depth_indicator</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">depth_dic</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>
    
<div class="viewcode-block" id="QuantumCircuit.t_depth"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.t_depth.html#qrisp.QuantumCircuit.t_depth">[docs]</a>    <span class="k">def</span> <span class="nf">t_depth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">epsilon</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the T-depth of self. T-depth is an important metric for fault tolerant</span>
<span class="sd">        quantum computing, because T gates are expected to be the bottleneck in fault tolerant</span>
<span class="sd">        architectures.</span>
<span class="sd">        </span>
<span class="sd">        According to `this paper &lt;https://arxiv.org/abs/1403.2975&gt;`_, the synthesis of an $RZ(\phi)$</span>
<span class="sd">        up to precision $\epsilon$ requires $3\text{log}_2(\frac{1}{\epsilon})$ </span>
<span class="sd">        T-gates.</span>
<span class="sd">        </span>
<span class="sd">        Based on this formula, this method performs a conservative estimate of the T-depth</span>
<span class="sd">        of self.</span>
<span class="sd">            </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        epsilon : float, optional</span>
<span class="sd">            The precision up to which parametrized gates should be approximated. If not given,</span>
<span class="sd">            Qrisp will determine the parameter with the highest precision. For more information</span>
<span class="sd">            on this feature see the examples</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            The estimated T-depth.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        </span>
<span class="sd">        We create a QuantumCircuit and evaluate the T-depth:</span>
<span class="sd">            </span>
<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(2)</span>
<span class="sd">        &gt;&gt;&gt; qc.t(0)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(0,1)</span>
<span class="sd">        &gt;&gt;&gt; qc.rx(2*np.pi*3/2**4, 1)</span>
<span class="sd">        &gt;&gt;&gt; qc.t_depth(epsilon = 2**-5)</span>
<span class="sd">        16</span>
<span class="sd">        </span>
<span class="sd">        In this example we execute a T-Gate on the 0-th qubit (T-depth : 1) followed</span>
<span class="sd">        by a CNOT gate (T-depth: 0) on qubits 0 and 1 and finally an RX gate.</span>
<span class="sd">        </span>
<span class="sd">        The RX-Gate can be executed by using the decomposition </span>
<span class="sd">        </span>
<span class="sd">        .. math::</span>
<span class="sd">            </span>
<span class="sd">            RX(\phi) = \text{H } \text{RZ}(\phi) \text{ H}</span>

<span class="sd">        The T-depth of executing a parametrized RX gate is therefore the same</span>
<span class="sd">        as the parametrized RZ. To determine the T-depth of the RZ-gate, executed</span>
<span class="sd">        with precision $2^{-5}$ we use the above formula:</span>
<span class="sd">            </span>
<span class="sd">        .. math::</span>
<span class="sd">            </span>
<span class="sd">            \begin{align}</span>
<span class="sd">            \text{TDEPTH}(\text{RZ}(\phi), \epsilon = 2^-5) = 3 \text{log}_2(2^5)\\</span>
<span class="sd">            &amp;= 15</span>
<span class="sd">            \end{align}</span>
<span class="sd">            </span>
<span class="sd">        We therefore arrive at 16.</span>
<span class="sd">        </span>
<span class="sd">        **Automatic precision determination**</span>
<span class="sd">        </span>
<span class="sd">        In the case of unknown precision, Qrisp assumes that every parameter in the </span>
<span class="sd">        circuit is of the form.</span>
<span class="sd">        </span>
<span class="sd">        .. math::</span>
<span class="sd">            </span>
<span class="sd">            \phi = 2\pi\frac{m}{2^k}</span>
<span class="sd">        </span>
<span class="sd">        Where $m$ is an integer. Qrisp will then determine the parameter with the maximum $k$</span>
<span class="sd">        and set $\epsilon = 2^{k_{max} +3}$.</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; qc.t_depth()</span>
<span class="sd">        22</span>
<span class="sd">        </span>
<span class="sd">        In this circuit $k_{max} = 4$ therefore, $\epsilon = 2^{-7}$ implying the T-depth is 22.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">epsilon</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">transpiled_qc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpile</span><span class="p">()</span>
            
            
            <span class="n">max_circuit_prec</span> <span class="o">=</span> <span class="mi">15</span>
            <span class="k">for</span> <span class="n">instr</span> <span class="ow">in</span> <span class="n">transpiled_qc</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
                <span class="n">op</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">op</span>
                
                <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">op</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
                    
                    <span class="n">par</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">par</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="mi">15</span><span class="p">))</span>
                    
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_circuit_prec</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">par</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="n">i</span><span class="p">):</span>
                            <span class="n">max_circuit_prec</span> <span class="o">=</span> <span class="n">i</span>
                            <span class="k">break</span>
        
            <span class="n">max_circuit_prec</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">-</span> <span class="n">max_circuit_prec</span>
            
            <span class="n">epsilon</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="n">max_circuit_prec</span> <span class="o">-</span> <span class="mi">3</span><span class="p">)</span>
                
        <span class="kn">from</span> <span class="nn">qrisp.misc.utility</span> <span class="kn">import</span> <span class="n">t_depth_indicator</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">(</span><span class="n">depth_indicator</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">t_depth_indicator</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="QuantumCircuit.cnot_depth"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.cnot_depth.html#qrisp.QuantumCircuit.cnot_depth">[docs]</a>    <span class="k">def</span> <span class="nf">cnot_depth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns the CNOT-depth of an self.</span>
<span class="sd">        </span>
<span class="sd">        In NISQ-era devices, CNOT gates are the restricting bottleneck for quantum </span>
<span class="sd">        circuit execution. This function can be used as a gate-speed specifier for</span>
<span class="sd">        the :meth:`compile &lt;qrisp.QuantumSession.compile&gt;`_ method.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The CNOT depth of self.</span>
<span class="sd">            </span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        </span>
<span class="sd">        We create a QuantumCircuit and evaluate it&#39;s CNOT depth.</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(4)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(0,1)</span>
<span class="sd">        &gt;&gt;&gt; qc.x(1)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(1,2)</span>
<span class="sd">        &gt;&gt;&gt; qc.y(2)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(2,3)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(1,0)</span>
<span class="sd">        &gt;&gt;&gt; print(qc)</span>
<span class="sd">                              ┌───┐     </span>
<span class="sd">        qb_59: ──■────────────┤ X ├─────</span>
<span class="sd">               ┌─┴─┐┌───┐     └─┬─┘     </span>
<span class="sd">        qb_60: ┤ X ├┤ X ├──■────■───────</span>
<span class="sd">               └───┘└───┘┌─┴─┐┌───┐     </span>
<span class="sd">        qb_61: ──────────┤ X ├┤ Y ├──■──</span>
<span class="sd">                         └───┘└───┘┌─┴─┐</span>
<span class="sd">        qb_62: ────────────────────┤ X ├</span>
<span class="sd">                                   └───┘</span>
<span class="sd">                                   </span>
<span class="sd">        &gt;&gt;&gt; qc.cnot_depth()</span>
<span class="sd">        3</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qrisp.misc.utility</span> <span class="kn">import</span> <span class="n">cnot_depth_indicator</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">(</span><span class="n">depth_indicator</span> <span class="o">=</span> <span class="n">cnot_depth_indicator</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuantumCircuit.num_qubits"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.num_qubits.html#qrisp.QuantumCircuit.num_qubits">[docs]</a>    <span class="k">def</span> <span class="nf">num_qubits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the amount of qubits.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            Amount of Qubits.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">)</span></div>

    <span class="c1"># Interface for appending instructions</span>
    <span class="c1"># Can take either instruction or operations objects</span>
    <span class="c1"># Can apply multiple operations, if given the correct qubits</span>
    <span class="c1"># For instance if it is required to apply an x gate to qubits 4,5,6 execute</span>
    <span class="c1"># qc.append(XGate(), [qubit4, qubit5, qubit6])</span>
    <span class="c1"># If it is required to apply a cx gate to the qubit pairs (1,2), (3,4), (5,6)</span>
    <span class="c1"># execute qc.append(CXGate(), [[qubit1, qubit3, qubit5], [qubit2, qubit4, qubit6]])</span>
    <span class="c1"># If it is required to apply a cx gate to the qubit pairs (1,2), (1,3), (1,4)</span>
    <span class="c1"># execute qc.append(CXGate(), [qubit_1, [qubit2, qubit3, qubit4]])</span>
<div class="viewcode-block" id="QuantumCircuit.append"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.append.html#qrisp.QuantumCircuit.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation_or_instruction</span><span class="p">,</span> <span class="n">qubits</span><span class="o">=</span><span class="p">[],</span> <span class="n">clbits</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method for appending Operation or Instruction objects to the QuantumCircuit.</span>

<span class="sd">        The parameter qubits can be an integer, a list of integers, a Qubit object or a</span>
<span class="sd">        list of Qubit objects. The same is valid for the clbit parameter.</span>

<span class="sd">        If given an Instruction object instead of an Operation, the given qubit and</span>
<span class="sd">        clbit parameters are ignored.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        operation_or_instruction : Operation or Instruction</span>
<span class="sd">            The operation or instruction to be appended to the QuantumCircuit.</span>
<span class="sd">        qubits : integer, list[integer], Qubit, list[Qubit], optional</span>
<span class="sd">            The qubits on which to apply the operation. The default is [].</span>
<span class="sd">        clbits : integer, list[integer], Clbit, list[Clbit], optional</span>
<span class="sd">            The classical bits on which to apply the operation. The default is [].</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We create a $H^{\otimes 4}$ gate and append it to every second qubit of another</span>
<span class="sd">        QuantumCircuit:</span>


<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; multi_h_qc = QuantumCircuit(4, name = &quot;multi h&quot;)</span>
<span class="sd">        &gt;&gt;&gt; multi_h_qc.h(range(4))</span>
<span class="sd">        &gt;&gt;&gt; multi_h = multi_h_qc.to_gate()</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(8)</span>
<span class="sd">        &gt;&gt;&gt; qc.append(multi_h, [2*i for i in range(4)])</span>
<span class="sd">        &gt;&gt;&gt; print(qc)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">                </span>
<span class="sd">                   ┌──────────┐</span>
<span class="sd">             qb_4: ┤0         ├</span>
<span class="sd">                   │          │</span>
<span class="sd">             qb_5: ┤          ├</span>
<span class="sd">                   │          │</span>
<span class="sd">             qb_6: ┤1         ├</span>
<span class="sd">                   │          │</span>
<span class="sd">             qb_7: ┤  multi h ├</span>
<span class="sd">                   │          │</span>
<span class="sd">             qb_8: ┤2         ├</span>
<span class="sd">                   │          │</span>
<span class="sd">             qb_9: ┤          ├</span>
<span class="sd">                   │          │</span>
<span class="sd">            qb_10: ┤3         ├</span>
<span class="sd">                   └──────────┘</span>
<span class="sd">            qb_11: ────────────</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Check the type of the instruction/operation</span>
        <span class="c1"># from qrisp.circuit import Instruction, Operation</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fast_append</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operation_or_instruction</span><span class="p">,</span> <span class="n">Instruction</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">operation_or_instruction</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qubits</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="k">raise</span>
                <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="n">qubits</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qb</span><span class="p">,</span> <span class="n">Qubit</span><span class="p">):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span>
                        <span class="k">raise</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Instruction</span><span class="p">(</span><span class="n">operation_or_instruction</span><span class="p">,</span> <span class="n">qubits</span><span class="p">,</span> <span class="n">clbits</span><span class="p">))</span>
            <span class="k">return</span>

            
            
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operation_or_instruction</span><span class="p">,</span> <span class="n">Instruction</span><span class="p">):</span>
            <span class="n">instruction</span> <span class="o">=</span> <span class="n">operation_or_instruction</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instruction</span><span class="o">.</span><span class="n">op</span><span class="p">,</span> <span class="n">instruction</span><span class="o">.</span><span class="n">qubits</span><span class="p">,</span> <span class="n">instruction</span><span class="o">.</span><span class="n">clbits</span><span class="p">)</span>

            <span class="k">return</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operation_or_instruction</span><span class="p">,</span> <span class="n">Operation</span><span class="p">):</span>
            <span class="n">operation</span> <span class="o">=</span> <span class="n">operation_or_instruction</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Tried to append object type &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">operation_or_instruction</span><span class="p">))</span>
                <span class="o">+</span> <span class="s2">&quot; which is neither Instruction nor Operation&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Convert arguments (possibly integers) to list</span>
        <span class="c1"># The logic here is that the list structure gets preserved ie.</span>
        <span class="c1"># [[0, 1] ,2] ==&gt; [[qubit_0, qubit_1], qubit_2]</span>
        <span class="c1"># unless the input is a single qubit/integer.</span>
        <span class="c1"># In this case we have</span>
        <span class="c1"># qubit_0 ==&gt; [qubit_0]</span>

        <span class="n">qubits</span> <span class="o">=</span> <span class="n">convert_to_qb_list</span><span class="p">(</span><span class="n">qubits</span><span class="p">,</span> <span class="n">circuit</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">clbits</span> <span class="o">=</span> <span class="n">convert_to_cb_list</span><span class="p">(</span><span class="n">clbits</span><span class="p">,</span> <span class="n">circuit</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Now we check which of the arguments is a list</span>
        <span class="c1"># For user convenience we allow to execute multiple gates at the same time</span>
        <span class="c1"># This comes with some restrictions where the operation to execute could be</span>
        <span class="c1"># ambigous.</span>
        <span class="c1"># When appending n gates with a single call of this function,</span>
        <span class="c1"># each qubit argument must either be a list of n qubits or a single qubit</span>

        <span class="c1"># First we check which arguments are lists</span>
        <span class="n">qb_argument_is_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">qb_argument_is_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="c1"># Same with classical bits</span>
        <span class="n">cb_argument_is_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clbits</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">clbits</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">cb_argument_is_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">qb_argument_is_list</span> <span class="o">+</span> <span class="n">cb_argument_is_list</span><span class="p">:</span>
            <span class="c1"># Determine the amount of gates to be applied</span>
            <span class="k">if</span> <span class="n">qb_argument_is_list</span><span class="p">:</span>
                <span class="n">arg_list_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="n">qb_argument_is_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">arg_list_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">clbits</span><span class="p">[</span><span class="n">cb_argument_is_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>

            <span class="c1"># Check that indeed every list argument that has been given has</span>
            <span class="c1"># arg_list_len entries</span>
            <span class="k">for</span> <span class="n">arg_list_index</span> <span class="ow">in</span> <span class="n">qb_argument_is_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="n">arg_list_index</span><span class="p">])</span> <span class="o">!=</span> <span class="n">arg_list_len</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;Don&#39;t know how to combine appending arguments &quot;</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">((</span><span class="n">qubits</span> <span class="o">+</span> <span class="n">clbits</span><span class="p">))</span>
                    <span class="p">)</span>

            <span class="k">for</span> <span class="n">arg_list_index</span> <span class="ow">in</span> <span class="n">cb_argument_is_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">clbits</span><span class="p">[</span><span class="n">arg_list_index</span><span class="p">])</span> <span class="o">!=</span> <span class="n">arg_list_len</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;Don&#39;t know how to combine appending arguments &quot;</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">((</span><span class="n">qubits</span> <span class="o">+</span> <span class="n">clbits</span><span class="p">))</span>
                    <span class="p">)</span>

            <span class="c1"># Create argument constellations</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">arg_list_len</span><span class="p">):</span>
                <span class="n">qubit_constellation</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">qb_argument_is_list</span><span class="p">:</span>
                        <span class="n">qubit_constellation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">qubit_constellation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

                <span class="n">clbit_constellation</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clbits</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">cb_argument_is_list</span><span class="p">:</span>
                        <span class="n">clbit_constellation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clbits</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clbit_constellation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clbits</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

                <span class="c1"># Append instruction (qubit_constellation and clbit_constellation) now</span>
                <span class="c1"># contains no lists but only qubit/clbit arguments</span>
                <span class="n">QuantumCircuit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">qubit_constellation</span><span class="p">,</span> <span class="n">clbit_constellation</span><span class="p">)</span>

            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span> <span class="o">!=</span> <span class="n">operation</span><span class="o">.</span><span class="n">num_qubits</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Provided incorrect amount (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span><span class="si">}</span><span class="s2">) of qubits for operation &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; (requires </span><span class="si">{</span><span class="n">operation</span><span class="o">.</span><span class="n">num_qubits</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">clbits</span><span class="p">)</span> <span class="o">!=</span> <span class="n">operation</span><span class="o">.</span><span class="n">num_clbits</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Provided incorrect amount (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">clbits</span><span class="p">)</span><span class="si">}</span><span class="s2">) of clbits for operation &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; (requires </span><span class="si">{</span><span class="n">operation</span><span class="o">.</span><span class="n">num_clbits</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">qubits</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Duplicate qubit arguments in </span><span class="si">{</span><span class="n">qubits</span><span class="si">}</span><span class="s2"> for operation </span><span class="si">{</span><span class="n">operation</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Building up the list of identifiers seems to slow down this function</span>
        <span class="c1"># We therefore check first if the qubit objects match and if this is not the</span>
        <span class="c1"># case we check if the identifiers match</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">)):</span>
            <span class="n">op_identifiers</span> <span class="o">=</span> <span class="p">[</span><span class="n">qb</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="n">qubits</span><span class="p">]</span>
            <span class="n">qc_identifiers</span> <span class="o">=</span> <span class="p">[</span><span class="n">qb</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">op_identifiers</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">qc_identifiers</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;Instruction Qubits &quot;</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">))</span>
                    <span class="o">+</span> <span class="s2">&quot; not present in circuit&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">qubits</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">[</span><span class="n">qc_identifiers</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">op_id</span><span class="p">)]</span> <span class="k">for</span> <span class="n">op_id</span> <span class="ow">in</span> <span class="n">op_identifiers</span>
                <span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">cb</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="n">clbits</span><span class="p">]))</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">clbits</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Duplicate clbit arguments&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">([</span><span class="n">cb</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="n">clbits</span><span class="p">])</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span>
            <span class="nb">set</span><span class="p">([</span><span class="n">cb</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clbits</span><span class="p">])</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Instruction Clbits not present in circuit&quot;</span><span class="p">)</span>

        <span class="c1"># Log which abstract parameters have been added to the circuit</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abstract_params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">abstract_params</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">critical_qubits</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">perm_critical_qubits</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="n">qubits</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">qb</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="n">critical_qubits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qb</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">qb</span><span class="o">.</span><span class="n">perm_lock</span><span class="p">:</span>
                <span class="n">perm_critical_qubits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qb</span><span class="p">)</span>

        <span class="n">critical_qubits</span> <span class="o">=</span> <span class="p">[</span><span class="n">qb</span> <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="n">qubits</span> <span class="k">if</span> <span class="n">qb</span><span class="o">.</span><span class="n">lock</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">critical_qubits</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">critical_qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lock_message</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">critical_qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lock_message</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Tried to perform operation </span><span class="si">{</span><span class="n">operation</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;on locked qubit </span><span class="si">{critical_qubits[0]}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Check if there are non-permeable operations on pt_locked qubits</span>
        <span class="n">critical_qubits</span> <span class="o">=</span> <span class="p">[</span><span class="n">qb</span> <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="n">qubits</span> <span class="k">if</span> <span class="n">qb</span><span class="o">.</span><span class="n">perm_lock</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">critical_qubits</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">qrisp.uncomputation</span> <span class="kn">import</span> <span class="n">is_permeable</span>

            <span class="n">critical_qubit_indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">qubits</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">qb</span><span class="p">)</span> <span class="k">for</span> <span class="n">qb</span> <span class="ow">in</span> <span class="n">critical_qubits</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_permeable</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">critical_qubit_indices</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">critical_qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">perm_lock_message</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">critical_qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">perm_lock_message</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Tried to perform non-permeable operation </span><span class="si">{</span><span class="n">operation</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> on&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot; perm_locked qubit </span><span class="si">{</span><span class="n">critical_qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Instruction</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">qubits</span><span class="p">,</span> <span class="n">clbits</span><span class="p">))</span></div>

<div class="viewcode-block" id="QuantumCircuit.run"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.run.html#qrisp.QuantumCircuit.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs a QuantumCircuit on a given backend.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        shots : int, optional</span>
<span class="sd">            The amount of shots to perform. The default is 10000.</span>
<span class="sd">        backend : BackendClient, optional</span>
<span class="sd">            The backend on which to evaluate the QuantumCircuit. The default is None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            The resulting counts for the given QuantumCircuit.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We create a GHZ QuantumCircuit and evaluate the results.</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(5)</span>
<span class="sd">        &gt;&gt;&gt; qc.h(0)</span>
<span class="sd">        &gt;&gt;&gt; qc.cx(0, range(1,5))</span>
<span class="sd">        &gt;&gt;&gt; qc.measure(range(5))</span>
<span class="sd">        &gt;&gt;&gt; qc.run()</span>
<span class="sd">        {&#39;0&#39;: 5000, &#39;1&#39;: 5000}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">backend</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">qrisp.default_backend</span> <span class="kn">import</span> <span class="n">def_backend</span>

            <span class="n">backend</span> <span class="o">=</span> <span class="n">def_backend</span>

        <span class="k">return</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shots</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuantumCircuit.statevector_array"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.statevector_array.html#qrisp.QuantumCircuit.statevector_array">[docs]</a>    <span class="k">def</span> <span class="nf">statevector_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a simulation of the statevector of self and returns a numpy array of</span>
<span class="sd">        complex numbers.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Qrisps qubit ordering convention is reversed when compared to Qiskit,</span>
<span class="sd">            because of simulation efficiency reasons.</span>
<span class="sd">            As a rule of thumb you can remember:</span>

<span class="sd">            The statevector array of the following circuit has the amplitude 1 at the</span>
<span class="sd">            index ``0010 = 2``</span>

<span class="sd">            ::</span>

<span class="sd">                qb.0: ─────</span>

<span class="sd">                qb.1: ─────</span>
<span class="sd">                      ┌───┐</span>
<span class="sd">                qb.2: ┤ X ├</span>
<span class="sd">                      └───┘</span>
<span class="sd">                qb.3: ─────</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The statevector of this circuit.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We create a QuantumCircuit, perform some operations and retrieve the</span>
<span class="sd">        statevector array.</span>

<span class="sd">        &gt;&gt;&gt; from qrisp import QuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc = QuantumCircuit(4)</span>
<span class="sd">        &gt;&gt;&gt; qc.h(qc.qubits)</span>
<span class="sd">        &gt;&gt;&gt; qc.z(-1)</span>
<span class="sd">        &gt;&gt;&gt; qc.statevector_array()</span>
<span class="sd">        array([ 0.24999997+0.j, -0.24999997+0.j,  0.24999997+0.j, -0.24999997+0.j,</span>
<span class="sd">                0.24999997+0.j, -0.24999997+0.j,  0.24999997+0.j, -0.24999997+0.j,</span>
<span class="sd">                0.24999997+0.j, -0.24999997+0.j,  0.24999997+0.j, -0.24999997+0.j,</span>
<span class="sd">                0.24999997+0.j, -0.24999997+0.j,  0.24999997+0.j, -0.24999997+0.j],</span>
<span class="sd">              dtype=complex64)</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qrisp.simulator</span> <span class="kn">import</span> <span class="n">statevector_sim</span>

        <span class="k">return</span> <span class="n">statevector_sim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">sha256</span>

        <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">def</span> <span class="nf">hash_</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">hex_value</span> <span class="o">=</span> <span class="n">sha256</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_value</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>

        <span class="n">transpiled_qc</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">transpiled_qc</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>
            <span class="n">instr</span> <span class="o">=</span> <span class="n">transpiled_qc</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="n">qubit_indices</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">qubit_indices</span><span class="p">[</span><span class="n">instr</span><span class="o">.</span><span class="n">qubits</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">[</span><span class="n">j</span><span class="p">])]</span> <span class="o">=</span> <span class="n">j</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>

            <span class="n">qubit_indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">qubit_indices</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">qubits</span><span class="p">))]</span>

            <span class="n">index_hash</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">qubit_indices</span><span class="p">))</span>

            <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">params</span><span class="p">)):</span>
                <span class="n">p</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">((</span><span class="n">instr</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">i</span><span class="p">))</span>
                <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

            <span class="n">param_hash</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">instr</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">definition</span><span class="p">:</span>
                <span class="n">op_hash</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">definition</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">op_hash</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

            <span class="n">res</span> <span class="o">+=</span> <span class="nb">hash</span><span class="p">((</span><span class="n">index_hash</span><span class="p">,</span> <span class="n">param_hash</span><span class="p">,</span> <span class="n">op_hash</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>

        <span class="n">res</span> <span class="o">*=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qubits</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<div class="viewcode-block" id="QuantumCircuit.from_qasm_str"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.from_qasm_str.html#qrisp.QuantumCircuit.from_qasm_str">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_qasm_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qasm_string</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads a QuantumCircuit from a QASM String.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qasm_string : string</span>
<span class="sd">            A string obeying the syntax of the OpenQASM specification.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        QuantumCircuit</span>
<span class="sd">            The corresponding QuantumCircuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
        
        <span class="n">qiskit_qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">()</span><span class="o">.</span><span class="n">from_qasm_str</span><span class="p">(</span><span class="n">qasm_string</span><span class="p">)</span>
        
        <span class="kn">from</span> <span class="nn">qrisp</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
        
        <span class="k">return</span> <span class="n">QuantumCircuit</span><span class="o">.</span><span class="n">from_qiskit</span><span class="p">(</span><span class="n">qiskit_qc</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="QuantumCircuit.from_qasm_file"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.from_qasm_file.html#qrisp.QuantumCircuit.from_qasm_file">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_qasm_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads a QuantumCircuit from a QASM file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename : string</span>
<span class="sd">            A string pointing to a file obeying the OpenQASM syntax.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        QuantumCircuit</span>
<span class="sd">            The corresponding QuantumCircuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
        
        <span class="n">qiskit_qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">()</span><span class="o">.</span><span class="n">from_qasm_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        
        <span class="kn">from</span> <span class="nn">qrisp</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
        
        <span class="k">return</span> <span class="n">QuantumCircuit</span><span class="o">.</span><span class="n">from_qiskit</span><span class="p">(</span><span class="n">qiskit_qc</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="QuantumCircuit.from_qiskit"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.from_qiskit.html#qrisp.QuantumCircuit.from_qiskit">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_qiskit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qiskit_qc</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Class method to create QuantumCircuits from Qiskit QuantumCircuits.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qiskit_qc : Qiskit QuantumCircuit</span>
<span class="sd">            The Qiskit QuantumCircuit to convert.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        QuantumCircuit</span>
<span class="sd">            The converted QuantumCircuit.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        We construct a fan-out QuantumCircuit in Qiskit:</span>

<span class="sd">        &gt;&gt;&gt; from qiskit import QuantumCircuit as QiskitQuantumCircuit</span>
<span class="sd">        &gt;&gt;&gt; qc_2 = QiskitQuantumCircuit(4)</span>
<span class="sd">        &gt;&gt;&gt; qc_2.cx(0, range(1,4))</span>
<span class="sd">        &gt;&gt;&gt; print(qc_2)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">                </span>
<span class="sd">            q_0: ──■────■────■──</span>
<span class="sd">                 ┌─┴─┐  │    │</span>
<span class="sd">            q_1: ┤ X ├──┼────┼──</span>
<span class="sd">                 └───┘┌─┴─┐  │</span>
<span class="sd">            q_2: ─────┤ X ├──┼──</span>
<span class="sd">                      └───┘┌─┴─┐</span>
<span class="sd">            q_3: ──────────┤ X ├</span>
<span class="sd">                           └───┘</span>

<span class="sd">        Note that we don&#39;t need to create a QuantumCircuit object first as this is a</span>
<span class="sd">        class method.</span>

<span class="sd">        &gt;&gt;&gt; qrisp_qc_2 = QuantumCircuit.from_qiskit(qc_2)</span>
<span class="sd">        &gt;&gt;&gt; print(qrisp_qc_2)</span>
<span class="sd">        </span>
<span class="sd">        ::</span>
<span class="sd">            </span>
<span class="sd">             qb_8: ──■────■────■──</span>
<span class="sd">                   ┌─┴─┐  │    │</span>
<span class="sd">             qb_9: ┤ X ├──┼────┼──</span>
<span class="sd">                   └───┘┌─┴─┐  │</span>
<span class="sd">            qb_10: ─────┤ X ├──┼──</span>
<span class="sd">                        └───┘┌─┴─┐</span>
<span class="sd">            qb_11: ──────────┤ X ├</span>
<span class="sd">                             └───┘</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qrisp.interface</span> <span class="kn">import</span> <span class="n">convert_from_qiskit</span>

        <span class="k">return</span> <span class="n">convert_from_qiskit</span><span class="p">(</span><span class="n">qiskit_qc</span><span class="p">)</span></div>

<div class="viewcode-block" id="QuantumCircuit.to_qiskit"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.to_qiskit.html#qrisp.QuantumCircuit.to_qiskit">[docs]</a>    <span class="k">def</span> <span class="nf">to_qiskit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to convert the given QuantumCircuit to a Qiskit QuantumCircuit.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Qiskit QuantumCircuit</span>
<span class="sd">            The converted circuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qrisp.interface.circuit_converter</span> <span class="kn">import</span> <span class="n">convert_circuit</span>

        <span class="k">return</span> <span class="n">convert_circuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_api</span><span class="o">=</span><span class="s2">&quot;qiskit&quot;</span><span class="p">,</span> <span class="n">transpile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="QuantumCircuit.to_pennylane"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.to_pennylane.html#qrisp.QuantumCircuit.to_pennylane">[docs]</a>    <span class="k">def</span> <span class="nf">to_pennylane</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to convert the given QuantumCircuit to a `Pennylane &lt;https://pennylane.ai/&gt;`_ Circuit.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        function</span>
<span class="sd">            A function representing a pennylane QuantumCircuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="kn">from</span> <span class="nn">qrisp.interface.converter.convert_to_qml</span> <span class="kn">import</span> <span class="n">qml_converter</span>
        
        <span class="k">return</span> <span class="n">qml_converter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="QuantumCircuit.to_pytket"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.to_pytket.html#qrisp.QuantumCircuit.to_pytket">[docs]</a>    <span class="k">def</span> <span class="nf">to_pytket</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to convert the given QuantumCircuit to a `PyTket &lt;https://cqcl.github.io/tket/pytket/api/#&gt;`_ Circuit.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        function</span>
<span class="sd">            A function representing a pennylane QuantumCircuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">qrisp.interface.converter.convert_to_pytket</span> <span class="kn">import</span> <span class="n">pytket_converter</span>
        
        <span class="k">return</span> <span class="n">pytket_converter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="c1"># Several methods to apply the standard operation defined in standard_operations.py</span>
<div class="viewcode-block" id="QuantumCircuit.measure"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.measure.html#qrisp.QuantumCircuit.measure">[docs]</a>    <span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">,</span> <span class="n">clbits</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instructs a measurement. If given no classical bits, the proper amount will be</span>
<span class="sd">        created.</span>


<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to be measured.</span>
<span class="sd">        clbits : ClBit, optional</span>
<span class="sd">            The Clbit to store the measurement result. The default is None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">clbits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">qrisp</span> <span class="kn">import</span> <span class="n">QuantumVariable</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qubits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">QuantumVariable</span><span class="p">)):</span>
                <span class="n">clbits</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">)):</span>
                    <span class="n">clbits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_clbit</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">clbits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_clbit</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">Measurement</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">],</span> <span class="p">[</span><span class="n">clbits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.cx"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.cx.html#qrisp.QuantumCircuit.cx">[docs]</a>    <span class="k">def</span> <span class="nf">cx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a CX-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The Qubit to control on.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The target Qubit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">CXGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.cy"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.cy.html#qrisp.QuantumCircuit.cy">[docs]</a>    <span class="k">def</span> <span class="nf">cy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a CY-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The Qubit to control on.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The target Qubit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">CYGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.cz"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.cz.html#qrisp.QuantumCircuit.cz">[docs]</a>    <span class="k">def</span> <span class="nf">cz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a CZ-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The Qubit to control on.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The target Qubit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">CZGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.h"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.h.html#qrisp.QuantumCircuit.h">[docs]</a>    <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a Hadamard-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">HGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.x"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.x.html#qrisp.QuantumCircuit.x">[docs]</a>    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a Pauli-X-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">XGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.y"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.y.html#qrisp.QuantumCircuit.y">[docs]</a>    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a Pauli-Y-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">YGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.z"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.z.html#qrisp.QuantumCircuit.z">[docs]</a>    <span class="k">def</span> <span class="nf">z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a Pauli-Z-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">ZGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.rx"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.rx.html#qrisp.QuantumCircuit.rx">[docs]</a>    <span class="k">def</span> <span class="nf">rx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a parametrized RX-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>

<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">RXGate</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.ry"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.ry.html#qrisp.QuantumCircuit.ry">[docs]</a>    <span class="k">def</span> <span class="nf">ry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a parametrized RY-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>

<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">RYGate</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.rz"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.rz.html#qrisp.QuantumCircuit.rz">[docs]</a>    <span class="k">def</span> <span class="nf">rz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a parametrized RZ-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>

<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">RZGate</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.cp"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.cp.html#qrisp.QuantumCircuit.cp">[docs]</a>    <span class="k">def</span> <span class="nf">cp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a controlled phase-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>

<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The other Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">CPGate</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.p"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.p.html#qrisp.QuantumCircuit.p">[docs]</a>    <span class="k">def</span> <span class="nf">p</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a phase-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>

<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">PGate</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.rxx"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.rxx.html#qrisp.QuantumCircuit.rxx">[docs]</a>    <span class="k">def</span> <span class="nf">rxx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct an RXX-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>

<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The other Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">RXXGate</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.rzz"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.rzz.html#qrisp.QuantumCircuit.rzz">[docs]</a>    <span class="k">def</span> <span class="nf">rzz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct an RZZ-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>

<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The other Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">RZZGate</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.xxyy"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.xxyy.html#qrisp.QuantumCircuit.xxyy">[docs]</a>    <span class="k">def</span> <span class="nf">xxyy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct an XXYY-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>
<span class="sd">        beta : float or sympi.Symbol</span>
<span class="sd">            The other angle parameter</span>
<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The other Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">XXYYGate</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span> <span class="n">beta</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.swap"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.swap.html#qrisp.QuantumCircuit.swap">[docs]</a>    <span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a SWAP-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The qubit to swap.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The other qubit to swap.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">SwapGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.mcx"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.mcx.html#qrisp.QuantumCircuit.mcx">[docs]</a>    <span class="k">def</span> <span class="nf">mcx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_qubits</span><span class="p">,</span> <span class="n">target_qubits</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">ctrl_state</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a multi-controlled X-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        control_qubits : list</span>
<span class="sd">            The list of Qubits to control on.</span>
<span class="sd">        target_qubits : Qubit</span>
<span class="sd">            The target Qubit.</span>
<span class="sd">        method : str, optional</span>
<span class="sd">            The algorithm to synthesize the mcx gate. The default is &quot;gray&quot;.</span>
<span class="sd">        ctrl_state : str or int, optional</span>
<span class="sd">            The state on which the X gate is activated. Can be supplied as a string</span>
<span class="sd">            (i.e. &quot;010110...&quot;) or an integer. The default is all ones (&quot;11111...&quot;).</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">ops</span><span class="o">.</span><span class="n">MCXGate</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">control_qubits</span><span class="p">),</span> <span class="n">ctrl_state</span><span class="o">=</span><span class="n">ctrl_state</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">),</span>
            <span class="n">control_qubits</span> <span class="o">+</span> <span class="p">[</span><span class="n">target_qubits</span><span class="p">],</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="QuantumCircuit.ccx"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.ccx.html#qrisp.QuantumCircuit.ccx">[docs]</a>    <span class="k">def</span> <span class="nf">ccx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctrl_qubit_0</span><span class="p">,</span> <span class="n">ctrl_qubit_1</span><span class="p">,</span> <span class="n">target_qubit</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a Toffoli-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ctrl_qubit_0 : list</span>
<span class="sd">            The first control Qubit.</span>
<span class="sd">        ctrl_qubit_1 : Qubit</span>
<span class="sd">            The second control Qubit.</span>
<span class="sd">        target_qubit : Qubit.</span>
<span class="sd">            The target Qubit.</span>
<span class="sd">        method : str, optional</span>
<span class="sd">            The algorithm to synthesize the mcx gate. The default is &quot;gray&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mcx</span><span class="p">([</span><span class="n">ctrl_qubit_0</span><span class="p">,</span> <span class="n">ctrl_qubit_1</span><span class="p">],</span> <span class="n">target_qubit</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">crx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a controlled rx-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>

<span class="sd">        qubits_0 : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        qubits_1 : Qubit</span>
<span class="sd">            The other Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">phi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">MCRXGate</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits_0</span><span class="p">,</span> <span class="n">qubits_1</span><span class="p">])</span>

<div class="viewcode-block" id="QuantumCircuit.t"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.t.html#qrisp.QuantumCircuit.t">[docs]</a>    <span class="k">def</span> <span class="nf">t</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a T-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">TGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.t_dg"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.t_dg.html#qrisp.QuantumCircuit.t_dg">[docs]</a>    <span class="k">def</span> <span class="nf">t_dg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a dagger T-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">TGate</span><span class="p">()</span><span class="o">.</span><span class="n">inverse</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.s"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.s.html#qrisp.QuantumCircuit.s">[docs]</a>    <span class="k">def</span> <span class="nf">s</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct an S-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">SGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.s_dg"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.s_dg.html#qrisp.QuantumCircuit.s_dg">[docs]</a>    <span class="k">def</span> <span class="nf">s_dg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a daggered S-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">SGate</span><span class="p">()</span><span class="o">.</span><span class="n">inverse</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.sx"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.sx.html#qrisp.QuantumCircuit.sx">[docs]</a>    <span class="k">def</span> <span class="nf">sx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a SX-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">SXGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.sx_dg"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.sx_dg.html#qrisp.QuantumCircuit.sx_dg">[docs]</a>    <span class="k">def</span> <span class="nf">sx_dg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a daggered SX-gate.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">SXGate</span><span class="p">()</span><span class="o">.</span><span class="n">inverse</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

    <span class="k">def</span> <span class="nf">barrier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clbits</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a Barrier onto the given Qubit. Barriers can be used as visual markers</span>
<span class="sd">        and compiler directives.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the barrier on.</span>
<span class="sd">        clbits : Clbit</span>
<span class="sd">            The Clbits to apply the barrier on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">qubits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">qubits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qubits</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">Barrier</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qubits</span><span class="p">)),</span> <span class="n">qubits</span><span class="p">)</span>

<div class="viewcode-block" id="QuantumCircuit.reset"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.reset.html#qrisp.QuantumCircuit.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a reset. This resets this Qubit into the $\ket{0}$ state regardless</span>
<span class="sd">        of its previous state.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to reset.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">Reset</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.u3"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.u3.html#qrisp.QuantumCircuit.u3">[docs]</a>    <span class="k">def</span> <span class="nf">u3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">lam</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a U3-gate from given Euler angles.</span>

<span class="sd">        A U3 gate has the unitary:</span>

<span class="sd">        .. math::</span>

<span class="sd">            U3(\theta, \phi, \lambda) = \begin{pmatrix} \cos{(\frac{\theta}{2})}</span>
<span class="sd">            &amp; -\exp{(i\lambda)}\sin{(\frac{\theta}{2})} \\</span>
<span class="sd">            \exp{(i\phi)} \sin{(\frac{\theta}{2})}</span>
<span class="sd">            &amp; \exp{(i(\phi+\lambda))}\cos{(\frac{\theta}{2})} \end{pmatrix}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        theta : float or sympy.Symbol</span>
<span class="sd">            The theta parameter.</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The phi parameter.</span>
<span class="sd">        lam : float or sympy.Symbol</span>
<span class="sd">            The lambda parameter.</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the u3 gate on.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">u3Gate</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">lam</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.unitary"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.unitary.html#qrisp.QuantumCircuit.unitary">[docs]</a>    <span class="k">def</span> <span class="nf">unitary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unitary_array</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a U3-gate from a given U3 matrix.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        unitary_array : numpy.ndarray</span>
<span class="sd">            The U3 matrix to apply.</span>
<span class="sd">        qubits : Qubit</span>
<span class="sd">            The Qubit to apply the gate on.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">mat</span> <span class="o">=</span> <span class="n">unitary_array</span>
        <span class="n">coeff</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
        <span class="n">gphase</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">tmp_10</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">((</span><span class="n">coeff</span> <span class="o">*</span> <span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">tmp_00</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">((</span><span class="n">coeff</span> <span class="o">*</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">tmp_10</span><span class="p">,</span> <span class="n">tmp_00</span><span class="p">)</span>
        <span class="n">phiplambda2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">coeff</span> <span class="o">*</span> <span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">phimlambda2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">coeff</span> <span class="o">*</span> <span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="n">phiplambda2</span> <span class="o">+</span> <span class="n">phimlambda2</span>
        <span class="n">lam</span> <span class="o">=</span> <span class="n">phiplambda2</span> <span class="o">-</span> <span class="n">phimlambda2</span>

        <span class="c1"># gphase -= (phi + lam)</span>

        <span class="n">arg_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">())</span>
        <span class="kn">from</span> <span class="nn">qrisp.simulator.unitary_management</span> <span class="kn">import</span> <span class="n">u3matrix</span>

        <span class="n">temp_u3</span> <span class="o">=</span> <span class="n">u3matrix</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">lam</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="n">gphase</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">temp_u3</span><span class="p">[</span><span class="n">arg_max</span><span class="p">]</span> <span class="o">/</span> <span class="n">mat</span><span class="o">.</span><span class="n">flatten</span><span class="p">()[</span><span class="n">arg_max</span><span class="p">]))</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">qrisp.circuit</span> <span class="kn">import</span> <span class="n">U3Gate</span>
        <span class="kn">from</span> <span class="nn">qrisp.simulator.unitary_management</span> <span class="kn">import</span> <span class="n">u3matrix</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">U3Gate</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">lam</span><span class="p">,</span> <span class="n">global_phase</span><span class="o">=</span><span class="n">gphase</span><span class="p">),</span> <span class="n">qubits</span><span class="p">)</span></div>
        <span class="c1"># self.u3(theta, phi, lam, [qubits], global_phase = gphase)</span>

<div class="viewcode-block" id="QuantumCircuit.gphase"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.gphase.html#qrisp.QuantumCircuit.gphase">[docs]</a>    <span class="k">def</span> <span class="nf">gphase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct a global phase. Global phases do not directly influence the</span>
<span class="sd">        QuantumCircuits outcome however they can become physical if used as a base gate</span>
<span class="sd">        for a controlled operation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi : float or sympy.Symbol</span>
<span class="sd">            The angle parameter.</span>
<span class="sd">        qubits : TYPE</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">GPhaseGate</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div>

<div class="viewcode-block" id="QuantumCircuit.id"><a class="viewcode-back" href="../../../reference/Circuit%20Construction/generated/qrisp.QuantumCircuit.id.html#qrisp.QuantumCircuit.id">[docs]</a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct an identity gate. Identity gates are simply placeholders and have no</span>
<span class="sd">        effect on the quantum state.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        qubits : TYPE</span>
<span class="sd">            The Qubit to apply the gate on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">IDGate</span><span class="p">(),</span> <span class="p">[</span><span class="n">qubits</span><span class="p">])</span></div></div>


<span class="k">class</span> <span class="nc">AppendingAccelerator</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original_appending_mode</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">QuantumCircuit</span><span class="o">.</span><span class="n">fast_append</span><span class="p">)</span>

        <span class="n">QuantumCircuit</span><span class="o">.</span><span class="n">fast_append</span> <span class="o">=</span> <span class="kc">True</span>
        

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception_type</span><span class="p">,</span> <span class="n">exception_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        
        <span class="n">QuantumCircuit</span><span class="o">.</span><span class="n">fast_append</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_appending_mode</span>


<span class="n">fast_append</span> <span class="o">=</span> <span class="n">AppendingAccelerator</span>


<span class="c1"># Converts various inputs (eg. integers, qubits or quantum variables) to lists of qubit</span>
<span class="c1"># used in the append method of QuantumCircuit and QuantumSession</span>
<span class="k">def</span> <span class="nf">convert_to_qb_list</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">circuit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">top_level</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">qrisp</span> <span class="kn">import</span> <span class="n">QuantumArray</span>
    
    <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Qubit</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">top_level</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="nb">input</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">input</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">QuantumArray</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">qv</span><span class="o">.</span><span class="n">reg</span> <span class="k">for</span> <span class="n">qv</span> <span class="ow">in</span> <span class="nb">input</span><span class="o">.</span><span class="n">flatten</span><span class="p">()],</span> <span class="p">[])</span>
        
    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">input</span><span class="p">)):</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">convert_to_qb_list</span><span class="p">(</span><span class="nb">input</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">circuit</span><span class="p">,</span> <span class="n">top_level</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="s2">&quot;reg&quot;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="n">reg</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">circuit</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Tried to convert integer argument to qubit without given circuit&quot;</span>
            <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">convert_to_qb_list</span><span class="p">(</span><span class="n">circuit</span><span class="o">.</span><span class="n">qubits</span><span class="p">[</span><span class="nb">input</span><span class="p">],</span> <span class="n">top_level</span><span class="o">=</span><span class="n">top_level</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t convert type &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">input</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; to qubit list&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>


<span class="k">def</span> <span class="nf">convert_to_cb_list</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">circuit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">top_level</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">qrisp.circuit</span> <span class="kn">import</span> <span class="n">Clbit</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">input</span><span class="p">)):</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">convert_to_cb_list</span><span class="p">(</span><span class="nb">input</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">circuit</span><span class="p">,</span> <span class="n">top_level</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">circuit</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Tried to convert integer argument to qubit without given circuit&quot;</span>
            <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">convert_to_cb_list</span><span class="p">(</span><span class="n">circuit</span><span class="o">.</span><span class="n">clbits</span><span class="p">[</span><span class="nb">input</span><span class="p">],</span> <span class="n">top_level</span><span class="o">=</span><span class="n">top_level</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Clbit</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">top_level</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="nb">input</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">input</span>

    <span class="k">return</span> <span class="n">result</span>

</pre></div>

                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="related">
    <div class="admonition note custom-box">
      <h2 style="font-size: 1.3em; margin-top: 0.9em;">Get in touch!</h2>
      <p>
    If you are interested in Qrisp or high-level quantum algorithm research in general connect with us on our
      <a href="https://join.slack.com/t/qrisp-workspace/shared_invite/zt-20yv9bbvo-igspbQpslCBK9ZlYSVijsw">Slack workspace.</a></p>
    </div>
  </div>
</div>

  <div class="sidebar-secondary-item">
<div class="related">
  <div class="admonition note custom-box" style="margin-bottom: 150px !important; text-align: center;">
    <p>
      <h2 style="font-size: 1.3em; margin-top: 0.9em;"></h2>
      Enable interactive documentation via
      <a href="https://thebe.readthedocs.io/en/stable/">Thebe.</a>
    </p>
    <button title="Start Kernel" class="thebelab-button thebe-launch-button" onclick="initThebe()" style="margin: 0 auto;">Start Kernel</button>
    <p>
  </div>
</div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2023, Qrisp developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>